"use strict";const searchInput=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-btn"),cardsList=document.querySelector(".js-list"),favCardsList=document.querySelector(".js-fav-list");let charactersList=[],favouriteCharacters=[];function getData(){fetch("https://breakingbadapi.com/api/characters").then(a=>a.json()).then(a=>{charactersList=a,renderCharactersList()})}function renderCards(a){return`<li class='cards-list-item'>\n    <article class='card js-card' id='${a.char_id}'>\n      <img src='${a.img}' alt='Picture of ${a.name}' title='${a.name}' class='card-img' />\n      <h3 class='card-name'>${a.name}</h3>\n      <p class='card-status'>${a.status}</p>\n    </article>\n  </li>`}function renderCharactersList(){let a="";for(const r of charactersList)a+=renderCards(r);cardsList.innerHTML=a,cardListeners()}function renderFavCard(a){return`<li class="cards-list-item">\n    <article class="card js-fav-card selected" id="${a.char_id}">\n      <i class="fa-solid fa-square-xmark"></i>  \n      <img src="${a.img}" alt="Picture of ${a.name}" title="${a.name}" class="card-img" />\n      <h3 class="card-name">${a.name}</h3>\n      <p class="card-status">${a.status}</p>\n    </article>\n  </li>`}function renderFavCharacters(){let a="";for(const r of favouriteCharacters)a+=renderFavCard(r);favCardsList.innerHTML=a,favCardListeners()}function filterCards(){const a=searchInput.value.toLowerCase();cardsList.innerHTML="";const r=charactersList.filter(r=>r.name.toLowerCase().includes(a));for(const a of r){const r=renderCards(a);cardsList.innerHTML+=r}}function cardListeners(){const a=document.querySelectorAll(".js-card");for(const r of a)r.addEventListener("click",handleClickCard)}function favCardListeners(){const a=document.querySelectorAll(".js-fav-card");for(const r of a)r.addEventListener("click",handleClickFavCard)}function handleClickCard(a){const r=parseInt(a.currentTarget.id),e=charactersList.find(a=>a.char_id===r);-1===favouriteCharacters.findIndex(a=>a.char_id===r)&&(favouriteCharacters.push(e),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters))),renderFavCharacters()}function handleClickFavCard(a){const r=parseInt(a.currentTarget.id),e=(favouriteCharacters.find(a=>a.char_id===r),favouriteCharacters.findIndex(a=>a.char_id===r));-1!==e&&favouriteCharacters.splice(e,1)}function handleSearch(a){a.preventDefault(),filterCards()}searchBtn.addEventListener("click",handleSearch),getData();const favouritesInLocalSt=JSON.parse(localStorage.getItem("favourites"));console.log(favouritesInLocalSt),null!==favouritesInLocalSt&&(favouriteCharacters=favouritesInLocalSt,renderFavCharacters());