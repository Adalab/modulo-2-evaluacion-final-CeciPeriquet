"use strict";const searchInput=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-btn"),cardsList=document.querySelector(".js-list"),favCardsList=document.querySelector(".js-fav-list");let charactersList=[],favouriteCharacters=[];function getData(){fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{charactersList=e,renderCharactersList()})}getData();const favouritesInLocalSt=JSON.parse(localStorage.getItem("favourites"));function renderCards(e){return`<li class="cards-list-item">\n      <article class="card js-card" id="${e.char_id}">\n        <img src="${e.img}" alt="Picture of ${e.name}" title="${e.name}" class="card-img" />\n        <h3 class="card-name">${e.name}</h3>\n        <p class="card-status">${e.status}</p>\n      </article>\n    </li>`}function renderCharactersList(){let e="";for(const r of charactersList)e+=renderCards(r);cardsList.innerHTML=e,cardListeners()}function cardListeners(){const e=document.querySelectorAll(".js-card");for(const r of e)r.addEventListener("click",handleClickCard)}function handleClickCard(e){const r=parseInt(e.currentTarget.id),a=charactersList.find(e=>e.char_id===r);-1===favouriteCharacters.findIndex(e=>e.char_id===r)&&(favouriteCharacters.push(a),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters))),renderFavCharacters()}function renderFavCard(e){return`<li class='cards-list-item'>\n      <article class='card js-fav-card selected' id='${e.char_id}'>\n        <i class='fa-solid fa-square-xmark'></i>  \n        <img src='${e.img}' alt='Picture of ${e.name}' title='${e.name}' class='card-img' />\n        <h3 class='card-name'>${e.name}</h3>\n        <p class='card-status'>${e.status}</p>\n      </article>\n    </li>`}function renderFavCharacters(){let e="";for(const r of favouriteCharacters)e+=renderFavCard(r);favCardsList.innerHTML=e,favCardListeners()}function filterCards(){let e=searchInput.value.toLowerCase();cardsList.innerHTML="";const r=charactersList.filter(r=>r.name.toLowerCase().includes(e));for(const e of r){const r=renderCards(e);cardsList.innerHTML+=r}""===e&&renderCharactersList()}function handleSearch(e){e.preventDefault(),filterCards(),cardListeners()}function handleReset(e){e.preventDefault();let r=searchInput.value.toLowerCase();console.log(r),""===r&&renderCharactersList()}function handleClickFavCard(e){const r=parseInt(e.currentTarget.id),a=(favouriteCharacters.find(e=>e.char_id===r),favouriteCharacters.findIndex(e=>e.char_id===r));-1!==a&&favouriteCharacters.splice(a,1),renderFavCharacters(),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters))}function favCardListeners(){const e=document.querySelectorAll(".js-fav-card");for(const r of e)r.addEventListener("click",handleClickFavCard)}null!==favouritesInLocalSt&&(favouriteCharacters=favouritesInLocalSt,renderFavCharacters()),searchBtn.addEventListener("click",handleSearch),searchInput.addEventListener("input",handleReset);