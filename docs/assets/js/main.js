"use strict";const searchInput=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-btn"),cardsList=document.querySelector(".js-list"),favCardsList=document.querySelector(".js-fav-list");let charactersList=[],favouriteCharacters=[];function getData(){fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{charactersList=e,renderCharactersList()})}getData();const favouritesInLocalSt=JSON.parse(localStorage.getItem("favourites"));function renderCards(e){return`<li class="cards-list-item">\n      <article class="card js-card" id="${e.char_id}">\n        <img src="${e.img}" alt="Picture of ${e.name}" title="${e.name}" class="card-img" />\n        <h3 class="card-name">${e.name}</h3>\n        <p class="card-status">${e.status}</p>\n      </article>\n    </li>`}function renderCharactersList(){let e="";for(const t of charactersList)e+=renderCards(t);cardsList.innerHTML=e,cardListeners()}function cardListeners(){const e=document.querySelectorAll(".js-card");for(const t of e)t.addEventListener("click",handleClickCard)}function handleClickCard(e){const t=parseInt(e.currentTarget.id),a=charactersList.find(e=>e.char_id===t);-1===favouriteCharacters.findIndex(e=>e.char_id===t)&&(favouriteCharacters.push(a),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters))),renderFavCharacters()}function renderFavCard(e){const t=document.createElement("li");t.classList.add("cards-list-item");const a=document.createElement("article");a.classList.add("card","js-fav-card","selected"),a.setAttribute("id",e.char_id);const r=document.createElement("i");r.classList.add("fa-solid","fa-square-xmark");const s=document.createElement("img");s.setAttribute("src",e.img),s.setAttribute("alt","Picture of "+e.name),s.setAttribute("title",e.name),s.classList.add("card-img");const c=document.createElement("h3");c.classList.add("card-name");const n=document.createTextNode(e.name),i=document.createElement("p");i.classList.add("card-status");const d=document.createTextNode(e.status);c.appendChild(n),i.appendChild(d),a.appendChild(r),a.appendChild(s),a.appendChild(c),a.appendChild(i),t.appendChild(a);return t}function renderFavCharacters(){favCardsList.innerHTML="";for(const e of favouriteCharacters)favCardsList.appendChild(renderFavCard(e));favCardListeners()}function filterCards(){let e=searchInput.value.toLowerCase();cardsList.innerHTML="";const t=charactersList.filter(t=>t.name.toLowerCase().includes(e));for(const e of t){const t=renderCards(e);cardsList.innerHTML+=t}""===e&&renderCharactersList()}function handleSearch(e){e.preventDefault(),filterCards(),cardListeners()}function handleReset(e){e.preventDefault();let t=searchInput.value.toLowerCase();console.log(t),""===t&&renderCharactersList()}function handleClickFavCard(e){const t=parseInt(e.currentTarget.id),a=(favouriteCharacters.find(e=>e.char_id===t),favouriteCharacters.findIndex(e=>e.char_id===t));-1!==a&&favouriteCharacters.splice(a,1),renderFavCharacters(),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters))}function favCardListeners(){const e=document.querySelectorAll(".js-fav-card");for(const t of e)t.addEventListener("click",handleClickFavCard)}null!==favouritesInLocalSt&&(favouriteCharacters=favouritesInLocalSt,renderFavCharacters()),searchBtn.addEventListener("click",handleSearch),searchInput.addEventListener("input",handleReset);